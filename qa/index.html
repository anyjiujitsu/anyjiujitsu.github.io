<!DOCTYPE html>
<html lang="en">
<head>
  <meta name="viewport" content="width=1200, initial-scale=0.32, maximum-scale=0.32, user-scalable=no, viewport-fit=cover" />
<meta charset="UTF-8" />
  <title>ANY N.E. - Events</title>


  <style>
    /* Global scale: increases all rem-based sizing proportionally */
    html { font-size: 22px; }

    /* Scale the entire rendered table/list (text + icons) up on desktop,
       and scale down on smaller screens so it fits within the viewport. */
    #monthsRoot {

      transform-origin: top center;
      transform: scale(1.55);
    
  font-size: 1.5em;
}

    @media (max-width: 900px) { #monthsRoot { transform: scale(1.20); } }

    @media (max-width: 700px) { #monthsRoot { transform: scale(1.05); } }

    @media (max-width: 500px) { #monthsRoot { transform: scale(0.90); } }


    :root {
      --green: #234c31;
      --bg: #ebebeb;
      --row: #e2e4e4;
      --beige: #ebdeca;
      --shadow: rgba(0,0,0,0.18);
      --shadow2: rgba(0,0,0,0.10);
      --radius: 4px;
    }

    * { box-sizing: border-box; }
    body {
      margin: 0;
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, sans-serif;
      background: var(--bg);
      color: #111;
    }

    .wrap {
      max-width: 100%;
      width: 100%;
      margin: 0 auto;
      padding: 0px 28px 0px;
    }

    .top {
      position: relative;
      z-index: 60;
display:flex;
      align-items:center;
      justify-content:space-between;
      gap: 16px;
      margin-bottom: -80px;
}

    .title {
      padding-left: var(--left-gutter);

      font-family: 'Fixture', Impact, Haettenschweiler, 'Arial Narrow Bold', sans-serif;
      font-size: 72px;
      letter-spacing: -0.04em;
      font-weight: 900;
      color: var(--green);
      margin: 0;
      text-transform: uppercase;
    }

    /* Sticky header bar (frozen) */
    .sticky-head {
      position: sticky;
      top: 0;
      position: sticky;
      top: 0;
      position: sticky;
      top: 0;
      position: relative;

      margin-top: 0;
      position: sticky;
      top: 0;
      z-index: 40;
      background: var(--green);
      box-shadow: 0 4px 10px rgba(0,0,0,0.10);
    
      padding: 12px 0;
    }

    .head-grid {
      max-width: 100%;
      margin: 0 auto;
      padding: 0 28px;
      display: grid;
      grid-template-columns: 138px 170px 124px 138px 80px 120px;;
      align-items: center;
    }

    .head-cell {
      color: #fff;
      font-weight: 800;
      font-size: 12px;
      padding: 12px 14px;
      text-align: left;
      white-space: nowrap;
    }

    /* Month cards */
    .month-card {
      background: transparent;
      margin: 18px 0 22px;
    }

    .month-label {
      font-weight: 800;
      color: rgba(0,0,0,0.55);
      letter-spacing: 0.08em;
      text-transform: uppercase;
      font-size: 12px;
      margin: 0 2px 10px;
    }

    

    

    /* Minimal month header nudge (does NOT move table) */
    .month-label{
      white-space: nowrap;
      transform: translateX(240px);
    }
    @media (max-width: 700px){ .month-label{ transform: translateX(120px); } }

/* Keep month grouping headers (e.g., NOVEMBER 2026) in view after scaling */
    @media (max-width: 700px) { }

.card-body {
      position: relative;
      box-shadow: 0 6px 14px rgba(0,0,0,0.12);
      overflow: visible; /* allow "new" dot to sit just outside the right edge like Index71 */
      background: var(--row);
    }

    /* subtle left gutter shadow like screenshot */
    .card-body::before {
      content:"";
      position:absolute;
      left:0; top:0; bottom:0;
      width: 10px;
      background: linear-gradient(to right, rgba(0,0,0,0.14), transparent);
      opacity: 0.18;
      pointer-events:none;
      z-index: 2;
    }

    .row {
      display: grid;
      grid-template-columns: 138px 190px 124px 138px 60px 110px;
      border-bottom: 1px solid rgba(0,0,0,0.06);
      align-items: center;
      position: relative; /* anchor for per-row "new" dot */
    }
    .row:last-child { border-bottom: none; }

    /* === Per-row "new" dot (same glow as filter pills) === */
    .record-new-dot{
      position:absolute;
      right: -16px;
      top: 50%;
      transform: translateY(-50%);
      width: 10px;
      height: 10px;
      border-radius: 50%;
      background-color: #28a745;
      box-shadow:
        0 0 4px rgba(40,167,69,0.9),
        0 0 8px rgba(40,167,69,0.7),
        0 0 14px rgba(40,167,69,0.5);
      pointer-events:none;
    }

    .cell {
      padding: 10px 14px;
      font-size: 13px;
      line-height: 1.25;
    }

    .cell.type {
      background: var(--beige);
      font-weight: 900;
      align-self: stretch;        /* fill full row height */
      display: flex;
      align-items: center;        /* center text within the full-height cell */
    }

    /* Responsive */
    @media (max-width: 860px) {
      .wrap { padding: 22px 14px 44px; }
      .head-grid { padding: 0 14px; }
      .title {
      padding-left: var(--left-gutter);
 font-size: 36px; }
      .cell { font-size: 14px; padding: 14px 12px; }
      .head-cell { font-size: 13px; padding: 12px 12px; }
    }

    @media (max-width: 860px) {
      .sticky-head { position: static; 
      padding: 12px 0;
    }
      .head-grid { display:none; }
      .row {
        grid-template-columns: 1fr;
        padding: 10px 0;
      }
      .cell {
        padding: 8px 12px;
        font-size: 13px;
      }
      .cell::before {
        content: attr(data-label);
        display:block;
        font-size: 11px;
        color: rgba(0,0,0,0.55);
        text-transform: uppercase;
        letter-spacing: 0.06em;
        margin-bottom: 4px;
      }
      .cell.type { border-bottom: 1px solid rgba(0,0,0,0.07); }
    }
  
    .geo-icon {
      display: inline-flex;
      width: 14px;
      height: 14px;
      margin-right: 6px;
      vertical-align: -2px;
      opacity: 1;
      flex: 0 0 auto;
    }
    
    .bldg-icon {
      display: inline-flex;
      width: 14px;
      height: 14px;
      margin-right: 6px;
      vertical-align: -2px;
      opacity: 1;
      flex: 0 0 auto;
    }
    .bldg-icon svg {
      width: 14px;
      height: 14px;
      fill: rgba(0,0,0,0.35);
    }

    .geo-icon svg {
      width: 14px;
      height: 14px;
      fill: none;
      stroke: rgba(0,0,0,0.35);
      stroke-width: 1.8;
    }
    @media (max-width: 860px) {
      .geo-icon {
      display: inline-flex;
      width: 14px;
      height: 14px;
      margin-right: 6px;
      vertical-align: -2px;
      opacity: 1;
      flex: 0 0 auto;
    }
      .geo-icon svg {
      width: 14px;
      height: 14px;
      fill: none;
      stroke: rgba(0,0,0,0.35);
      stroke-width: 1.8;
    }
    }

  
    @media (max-width: 860px) {
      
    }

  
    @font-face {
      font-family: 'Fixture';
      src: local('Fixture'), local('Fixture Display'), local('Fixture Condensed');
      font-weight: 400 900;
      font-style: normal;
    }

  
    .search-wrap{position:relative;z-index:120;background:var(--bg);padding:10px 28px 6px;}
    .search-inner{max-width:100%;margin:0 auto;display:flex;align-items:center;}
    .search-box{flex:1;display:flex;align-items:center;gap:8px;background:#f2f2f2;border:1px solid rgba(0,0,0,0.14);box-shadow:0 2px 8px rgba(0,0,0,0.06);padding:10px 12px;}
    .search-icon{width:16px;height:16px;opacity:0.55;flex:0 0 auto;}
    .search-icon svg{width:16px;height:16px;fill:rgba(0,0,0,0.45);}
    
    #nlSearch{
      width:100%;
      border:0;
      outline:none;
      background:transparent;
      color:#1f2a1f;
      font-size:12px;
      line-height:1;
    }
    
    #nlSearch::placeholder{color:rgba(0,0,0,0.42);}
    @media (max-width:860px){.search-wrap{padding:10px 14px 6px;}}

  
    .location-stack{display:flex;flex-direction:column;line-height:1.15;}
    .location-city { font-weight: 600; font-size: 13px; }
    .location-state { font-size: 11px; color: rgba(0,0,0,0.55); }

  
    .location-inline {
      display: flex !important;
      align-items: center; /* match Index71: icon is vertically centered beside the City/State stack */
      gap: 6px;
    }
    .location-inline .geo-icon,
    .location-inline .bldg-icon {
      align-self: center;
    }
    /* When Location is rendered as City over State, the gap handles spacing — prevent margin forcing a line break */
    .location-inline .geo-icon,
    .location-inline .bldg-icon {
      margin-right: 0 !important;
    }
    .location-stack {
      display: flex;
      flex-direction: column;
      line-height: 1.15;
    }

  
    .for-where-stack {
      display: flex;
      flex-direction: column;
      line-height: 1.15;
    }
    .for-main {
      font-weight: 600;
    }
    .for-where {
      font-size: 11px;
      color: rgba(0,0,0,0.55);
    }

  
    .forwhere-inline{
      display:flex;
      align-items:center;
      gap:6px;
    }
    .for-label{
      font-size: 12px;
      font-weight: 800;
      letter-spacing: 0.08em;
      text-transform: uppercase;
      color: rgba(0,0,0,0.55);
      line-height: 1.05;
    }

  
    .date-inline{
      display:flex;
      align-items:center;
      gap:6px;
      justify-content:flex-start;
    }
    .date-stack{
      display:flex;
      flex-direction:column;
      line-height:1.15;
    }
    .date-day{
      font-weight:600;
    }
    .date-date{
      font-size:11px;
      color: rgba(0,0,0,0.55);
    }
    .cal-icon{
      display:inline-flex;
      width:14px;
      height:14px;
      flex:0 0 auto;
      opacity:0.9;
    }
    .cal-icon svg{
      width:14px;
      height:14px;
      fill:none;
      stroke: rgba(0,0,0,0.35);
      stroke-width:1.8;
      stroke-linecap:round;
      stroke-linejoin:round;
    }

  
    /* Option B: keep WHERE column in DOM for JS stacking, but visually collapse it */
    .head-grid .head-cell:nth-child(3),
    .row .cell:nth-child(3) {
      padding-left: 0 !important;
      padding-right: 0 !important;
      border-left: 0 !important;
      border-right: 0 !important;
      overflow: hidden !important;
      white-space: nowrap !important;
    }


    /* Option B: keep DAY column in DOM for JS stacking, but visually collapse it */
    .head-grid .head-cell:nth-child(5),
    .row .cell:nth-child(5) {
      padding-left: 0 !important;
      padding-right: 0 !important;
      border-left: 0 !important;
      border-right: 0 !important;
      overflow: hidden !important;
      white-space: nowrap !important;
    }


    
    /* --- Force desktop grid layout on mobile (keep same structure as desktop) --- */
    @media (max-width: 760px) {
      /* keep sticky header behavior */
      .sticky-head { position: sticky; top: 0; 
      padding: 12px 0;
    }

      /* keep the green header grid visible */
      .head-grid { display: grid; }

      /* keep rows in multi-column grid instead of collapsing (tighter column mix) */
      .head-grid, .row {
        grid-template-columns: 138px 140px 124px 138px 70px 94px;
      }

      /* remove mobile "label above value" behavior */
      .cell::before { content: none !important; display: none !important; }
    }

    /* Preserve layout without forcing oversized min-width; allow gentle horizontal scroll only if truly needed */
    .wrap { overflow-x: hidden; -webkit-overflow-scrolling: touch; }
    .head-grid, .row { min-width: 0; }
/* Prevent text clipping when forcing desktop layout on narrow screens */
    .card-body { overflow-x: hidden; overflow-y: hidden; -webkit-overflow-scrolling: touch; }


    /* Mobile forced-desktop: reduce side padding so last column isn't clipped */
    @media (max-width: 760px) {
      .wrap { padding-left: 12px !important; padding-right: 12px !important; }
      .head-grid { padding-left: 12px !important; padding-right: 12px !important; }
      .card-body { overflow-x: auto !important; overflow-y: hidden !important; -webkit-overflow-scrolling: touch; }
    }


    /* Ensure columns can truly resize (no forced min-width) */
    @media (max-width: 760px) {
      .head-grid, .row { min-width: 0 !important; }
    }


    /* --- No wrapping in grid cells (prevent DAY/DATE wrapping) --- */
    .head-grid .head-cell,
    .row .cell,
    .row .cell * {
      white-space: nowrap !important;
    }


    /* Allow horizontal scroll rather than wrapping/cropping on narrow screens */
    .wrap { overflow-x: auto !important; -webkit-overflow-scrolling: touch; }


    /* Slightly reduce table text size for tighter fit */
    .head-grid .head-cell {
      font-size: 12px;
    }

    .row .cell {
      font-size: 13px;
    }

    .row .cell small {
      font-size: 12px;
    }


    /* Global slight reduction for all table text */
    .head-grid,
    .head-grid .head-cell,
    .row,
    .row .cell,
    .row .cell * {
      font-size: 12px !important;
      line-height: 1.25;
    }


    /* --- Green header bar search (live filtering) --- */
    
    
    .head-search{
      position:absolute;
      left: var(--left-gutter);          /* align with the left gutter under the 'U' */
      bottom:6px;         /* sit inside green bar, under the title line */
      z-index:60;
      pointer-events:auto;
    }
    
    
    
    
    .head-search-box{
      display:flex;
      align-items:center;
      gap:6px;
      height:28px;
      padding:0 10px;
      border-radius:999px;
      background:#ffffff;
      border:1px solid rgba(0,0,0,0.16);
      box-shadow:0 2px 10px rgba(0,0,0,0.10);
      max-width:290px;
      width:min(290px, 44vw);
    }
    
    
    .head-search-icon{
      display:inline-flex;
      width:14px;
      height:14px;
      opacity:0.9;
      flex:0 0 auto;
    }
    .head-search-icon svg{
      width:14px;
      height:14px;
      fill: rgba(255,255,255,0.85);
    }
    
    #nlSearch{
      width:100%;
      border:0;
      outline:none;
      background:transparent;
      color:#1f2a1f;
      font-size:12px;
      line-height:1;
    }
    
    #nlSearch::placeholder{
      color: rgba(255,255,255,0.65);
    }
    .head-search-clear{
      border:0;
      background:transparent;
      color: rgba(255,255,255,0.85);
      font-size: 16px;
      line-height: 1;
      padding: 0 2px;
      cursor:pointer;
      opacity:0.85;
      flex:0 0 auto;
    }
    .head-search-clear:hover{opacity:1;}

    /* keep search reachable on smaller widths */
    @media (max-width: 980px){
      
    
    .head-search{
      position:absolute;
      left: var(--left-gutter);          /* align with the left gutter under the 'U' */
      bottom:6px;         /* sit inside green bar, under the title line */
      z-index:60;
      pointer-events:auto;
    }
    
    
      
    
    .head-search-box{
      display:flex;
      align-items:center;
      gap:6px;
      height:28px;
      padding:0 10px;
      border-radius:999px;
      background:#ffffff;
      border:1px solid rgba(0,0,0,0.16);
      box-shadow:0 2px 10px rgba(0,0,0,0.10);
      max-width:290px;
      width:min(290px, 44vw);
    }
    
    
    }


    /* --- Modern search bar styling --- */
    
    
    .head-search-box{
      display:flex;
      align-items:center;
      gap:6px;
      height:28px;
      padding:0 10px;
      border-radius:999px;
      background:#ffffff;
      border:1px solid rgba(0,0,0,0.16);
      box-shadow:0 2px 10px rgba(0,0,0,0.10);
      max-width:290px;
      width:min(290px, 44vw);
    }
    
    
    
    #nlSearch{
      width:100%;
      border:0;
      outline:none;
      background:transparent;
      color:#1f2a1f;
      font-size:12px;
      line-height:1;
    }
    
    #nlSearch::placeholder{
      color: rgba(0,0,0,0.45);
    }
    .head-search-icon svg{
      fill: rgba(0,0,0,0.55);
    }
    .head-search-clear{
      color: rgba(0,0,0,0.6);
    }


    /* Shared left gutter for title + header search (align under the 'U' in UPCOMING) */
    :root{ --left-gutter: 28px; }


    /* Shift search bar only (do not affect header text) */
    .head-search{
      transform: translateX(196px);
    }


    /* === Lock header + search alignment to table content === */
    :root {
      --table-start: 64px; /* matches visual left edge of table content */
    }

    /* Align UPCOMING EVENTS title */
    .sticky-head .title {
      padding-left: var(--table-start) !important;
    }

    /* Align search bar start with table */
    .head-search {
      left: var(--table-start) !important;
      transform: none !important;
    }


    /* Override: move ONLY the search bar right 5x; undo table-alignment for search */
    .head-search{
      left: auto !important;
      right: auto !important;
      transform: translateX(28px) !important;
    }


    /* --- State multi-select dropdown (separate from search) --- */
    .state-filter{
      position:absolute;
      bottom:6px; /* match search bar vertical position */
      left: 360px;
      z-index: 61;
      pointer-events: auto;
    }
    .state-btn{
  height: 40px;
  font-size: 13px;
      height:28px;
      display:inline-flex;
      align-items:center;
      gap:6px;
      padding:0 12px;
      border-radius:999px;
      background:#ffffff;
      border:1px solid rgba(0,0,0,0.16);
      box-shadow:0 2px 10px rgba(0,0,0,0.10);
      font-size:12px;
      color: rgba(0,0,0,0.6);
      cursor:pointer;
      user-select:none;

      /* Wider pill so selected state(s) fit on one line */
      min-width: 220px;
      max-width: 360px;
      justify-content: space-between;
    }
    .state-label{
      flex: 1 1 auto;
      min-width: 0;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }
    .state-caret{ flex: 0 0 auto; opacity:0.7; }
    .state-btn:focus{
      outline:none;
      box-shadow:0 0 0 3px rgba(47,79,47,0.18), 0 2px 10px rgba(0,0,0,0.10);
    }

    .state-menu{
      position:absolute;
      top:34px;
      left:0;

      margin-top:8px;
      width:220px;
      max-height:320px;
      overflow:auto;
      background:#ffffff;
      border:1px solid rgba(0,0,0,0.14);
      border-radius:12px;
      box-shadow:0 10px 30px rgba(0,0,0,0.18);
      padding:10px;
    }
    .state-menu-header{
      display:flex;
      justify-content:space-between;
      align-items:center;
      padding:2px 2px 8px 2px;
      border-bottom:1px solid rgba(0,0,0,0.08);
      margin-bottom:8px;
    }
    .state-menu-title{
      font-size:12px;
      font-weight:600;
      color:#1f2a1f;
    }
    .state-clear{
      border:0;
      background:transparent;
      font-size:12px;
      color: rgba(0,0,0,0.55);
      cursor:pointer;
      padding:2px 6px;
      border-radius:8px;
    }
    .state-clear:hover{ background: rgba(0,0,0,0.05); }

    .state-list{
      display:flex;
      flex-direction:column;
      gap:6px;
    }
    .state-item{
      display:flex;
      align-items:center;
      gap:8px;
      font-size:12px;
      color:#1f2a1f;
      padding:4px 6px;
      border-radius:8px;
    }
    .state-item:hover{ background: rgba(0,0,0,0.04); }
    .state-item input{ width:14px; height:14px; }

    

    /* --- Year multi-select dropdown (same style as State) --- */
    
    .event-filter{
      position:absolute;
      bottom:6px; /* match search bar vertical position */
      left: 120px; /* sits before Years pill */
      z-index: 61;
      pointer-events: auto;
      transform: translateY(2px); /* match other pills */
    }
    .event-btn{
      height:28px;
      display:inline-flex;
      align-items:center;
      gap:6px;
      padding:0 12px;
      border-radius:999px;
      background:#ffffff;
      border:1px solid rgba(0,0,0,0.16);
      box-shadow:0 2px 10px rgba(0,0,0,0.10);
      font-size:11px;
      cursor:pointer;
      white-space:nowrap;
    }
    .event-menu{
      position:absolute;
      top:34px;
      left:0;
      margin-top:8px;
      width:200px;
      max-height:320px;
      overflow:auto;
      background:#ffffff;
      border:1px solid rgba(0,0,0,0.14);
      border-radius:12px;
      box-shadow:0 10px 30px rgba(0,0,0,0.18);
      padding:10px;
    }
    .event-menu-header{
      display:flex;
      justify-content:space-between;
      align-items:center;
      padding:2px 2px 8px 2px;
      border-bottom:1px solid rgba(0,0,0,0.08);
      margin-bottom:8px;
    }
    .event-menu-title{
      font-weight:800;
      font-size:12px;
      color:rgba(0,0,0,0.70);
    }
    .event-clear{
      border:0;
      background:transparent;
      font-weight:800;
      font-size:12px;
      color: var(--green);
      cursor:pointer;
    }
    .event-list{
      display:flex;
      flex-direction:column;
      gap:6px;
      padding-top:2px;
    }
    .event-item{
      display:flex;
      align-items:center;
      gap:8px;
      font-size:12px;
      cursor:pointer;
      user-select:none;
    }
    .event-item input{ accent-color: var(--green); }

.year-filter{
      position:absolute;
      bottom:6px; /* match search bar vertical position */
      left: 200px; /* sits between search pill and state pill */
      z-index: 61;
      pointer-events: auto;
      transform: translateY(2px); /* match state pill nudge */
    }
    .year-btn{
  height: 40px;
  font-size: 13px;
      height:28px;
      display:inline-flex;
      align-items:center;
      gap:6px;
      padding:0 12px;
      border-radius:999px;
      background:#ffffff;
      border:1px solid rgba(0,0,0,0.16);
      box-shadow:0 2px 10px rgba(0,0,0,0.10);
      font-size:12px;
      color: rgba(0,0,0,0.6);
      cursor:pointer;
      user-select:none;

      min-width: 150px;
      max-width: 240px;
      justify-content: space-between;
    }
    .year-label{
      flex: 1 1 auto;
      min-width: 0;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }
    .year-caret{ flex: 0 0 auto; opacity:0.7; }
    .year-btn:focus{
      outline:none;
      box-shadow:0 0 0 3px rgba(47,79,47,0.18), 0 2px 10px rgba(0,0,0,0.10);
    }

    .year-menu{
      position:absolute;
      top:34px;
      left:0;
      margin-top:8px;
      width:200px;
      max-height:320px;
      overflow:auto;
      background:#ffffff;
      border:1px solid rgba(0,0,0,0.14);
      border-radius:12px;
      box-shadow:0 10px 30px rgba(0,0,0,0.18);
      padding:10px;
    }
    .year-menu-header{
      display:flex;
      justify-content:space-between;
      align-items:center;
      padding:2px 2px 8px 2px;
      border-bottom:1px solid rgba(0,0,0,0.08);
      margin-bottom:8px;
    }
    .year-menu-title{
      font-size:12px;
      font-weight:600;
      color:#1f2a1f;
    }
    .year-clear{
      border:0;
      background:transparent;
      font-size:12px;
      color: rgba(0,0,0,0.55);
      cursor:pointer;
      padding:2px 6px;
      border-radius:8px;
    }
    .year-clear:hover{ background: rgba(0,0,0,0.05); }

    .year-list{
      display:flex;
      flex-direction:column;
      gap:6px;
    }
    .year-item{
      display:flex;
      align-items:center;
      gap:8px;
      font-size:12px;
      color:#1f2a1f;
      padding:4px 6px;
      border-radius:8px;
    }
    .year-item:hover{ background: rgba(0,0,0,0.04); }
    .year-item input{ width:14px; height:14px; }
@media (max-width: 980px){
      .year-filter{ left: 170px; }
      .state-filter{ left: 330px; }
      .year-menu{ width: 190px; }
      .state-menu{ width: 210px; }
    }


    /* Align state pill vertically with search bar */
    .state-filter{
      bottom: 6px !important;
      display: flex;
      align-items: center;
    }
    .state-btn{
  height: 40px;
  font-size: 13px;
      height: 28px !important;
      line-height: 28px !important;
      margin-top: 0 !important;
    }


    /* Force state pill bottom to align exactly with search pill bottom */
    .state-filter{
      bottom: 6px !important;
      transform: translate(56px, 2px) !important; /* nudge right + down to match search pill */
    }


    /* Match Year/State pill text color to the search box's grey display tone */
    :root{ --search-muted: rgba(0,0,0,0.42); }
    #nlSearch::placeholder{ color: var(--search-muted) !important; }

    .year-btn, .state-btn{
  height: 40px;
  font-size: 13px;
      color: var(--search-muted) !important;
    }
    .year-caret, .state-caret{
      color: var(--search-muted) !important;
    }

    /* Move Year/State pills horizontally to the right (4x) */
    .year-filter{
      transform: translate(56px, 2px) !important;
    }


/* --- FORCE Year/State pill vertical offset (requested) --- */
.year-filter, .state-filter{
  transform: translate(56px, 6px) !important; /* keep existing X shift, move down 2x */
}


/* --- Mobile: keep EXACT desktop layout (no responsive reflow) --- */
html, body {
  min-width: 760px;           /* lock desktop canvas */
}
body {
  overflow-x: hidden;            /* allow horizontal scroll on small screens */
  -webkit-text-size-adjust: 100%;
  text-size-adjust: 100%;
}


/* --- Ensure last two columns (DAY + DATE) never get clipped --- */
.row .cell:nth-child(5),
.row .cell:nth-child(6),
.head-grid .head-cell:nth-child(5),
.head-grid .head-cell:nth-child(6){
  white-space: nowrap;
}
.row .cell:nth-child(6){
  overflow: visible;
}


/* --- FIX: prevent last columns clipping & remove horizontal scroll by fitting grid into container width --- */
/* head-grid has padding: 0 28px (56px total) inside max-width:760px => available grid width = 704px */
.head-grid, .row{
  grid-template-columns: 138px 108px 124px 138px 90px 126px !important;
}


/* --- FIX: only last column (DATE) gets extra room, no shift of DAY column --- */
.head-grid .head-cell:nth-child(6),
.row .cell:nth-child(6){
  white-space: nowrap;
}


/* --- Adjust only positioning within the last two columns (no grid shift) --- */
/* Move DAY (5th col) content to the right */
.head-grid .head-cell:nth-child(5),
.row .cell:nth-child(5){
  text-align: right !important;
  padding-right: 18px !important; /* nudge a bit more right */
}

/* Move DATE (6th col) content to the left (closer to DAY) */
.head-grid .head-cell:nth-child(6),
.row .cell:nth-child(6){
  padding-left: 6px !important;  /* reduce left inset */
  padding-right: 12px !important;
}

/* Ensure DATE never clips */
.row .cell:nth-child(6){
  overflow: visible !important;
  white-space: nowrap !important;
}


/* --- Shift only the 2nd-to-last column (DAY) to the right --- */
.head-grid .head-cell:nth-child(5),
.row .cell:nth-child(5){
  padding-left: 22px !important;  /* shift content right */
  padding-right: 0 !important;
  text-align: left !important;
}


/* --- VISUAL FIX: shift CITY/STATE (visual col 3 = grid col 4) to the right ONLY --- */
.head-grid .head-cell:nth-child(4),
.row .cell:nth-child(4){
  padding-left: 52px !important;
}


/* --- Normalize pill sizing: search, year, state --- */
.search-pill,
.year-btn,
.state-btn{
  height: 40px;
  font-size: 13px;
  padding: 0 14px;
  display: flex;
  align-items: center;
}


/* === FINAL: make Search / Year / State pills EXACTLY the same size === */
.head-search-box,
.year-btn,
.state-btn{
  height: 40px !important;
  min-height: 40px !important;
  border-radius: 999px !important;
  box-sizing: border-box !important;
  font-size: 13px !important;
  line-height: 40px !important;
}

/* Search pill is a container; keep its internal items vertically centered */
.head-search-box{
  display: flex !important;
  align-items: center !important;
  padding: 0 14px !important;
}

/* Match input text sizing & prevent mobile auto-zoom quirks */
#nlSearch{
  height: 100% !important;
  font-size: 13px !important;
  line-height: 40px !important;
  padding: 0 !important;
  margin: 0 10px !important;
  background: transparent !important;
}

/* Year/State are buttons; match padding to Search */
.year-btn,
.state-btn{
  display: inline-flex !important;
  align-items: center !important;
  padding: 0 14px !important;
}


/* === FINAL: shrink Search / Year / State pills ~3x === */
.head-search-box,
.year-btn,
.state-btn{
  height: 28px !important;
  min-height: 28px !important;
  font-size: 11px !important;
  line-height: 28px !important;
  padding: 0 10px !important;
}

/* Keep search input aligned inside smaller pill */
#nlSearch{
  height: 100% !important;
  font-size: 11px !important;
  line-height: 28px !important;
  margin: 0 8px !important;
}


/* --- Narrow STATE pill width only --- */
.state-btn{
  min-width: 90px !important;
  padding-left: 8px !important;
  padding-right: 8px !important;
}


/* --- Match Years pill width to States pill --- */
.year-btn{
  min-width: 90px !important;
  padding-left: 8px !important;
  padding-right: 8px !important;
}


/* --- Bold pill text when a selection is active --- */
.year-btn.has-selection,
.state-btn.has-selection{
  font-weight: 600 !important;
}


/* --- Shift States pill 8x to the right --- */
.state-btn{
  margin-left: 160px !important; /* 8x baseline (8px * 8) */
}


/* --- Shift Years pill 23x to the right --- */
.year-btn{
  margin-left: 0px !important;
}


/* --- Move Search pill 2x to the left --- */
.head-search-box{
  margin-left: -16px !important;
}


/* --- FIX: Years pill/menu stacking so it can be clicked and dropdown is visible --- */
.year-filter{ z-index: 70 !important; }
.year-menu{
  z-index: 71 !important;
  pointer-events: auto !important;
}


/* === FIX: Years pill not opening (avoid overlap). Move YEAR CONTAINER, not the button. === */
.year-filter{
  left: 424px !important;   /* was 200px; moved right by 224px as requested earlier */
  z-index: 62 !important;
}
.year-btn{
  margin-left: 0px !important; /* no internal shifting */
}
/* Keep State on top of itself */
.state-filter{ z-index: 61 !important; }

</style>

<style>
.state-check{
  color: #2e7d32;
  font-weight: 600;
  margin-left: 6px;
}
</style>


<style>
.year-check{
  color: #2e7d32;
  font-weight: 600;
  margin-left: 6px;
}


<style>
.event-check{
  color: #2e7d32;
  font-weight: 600;
  margin-left: 6px;
}
</style>
</style>


<!-- === OVERRIDES: Header up 4x; ANY logo 1x bigger (independent) === -->
<style>
  /* Header: move UP by 4x (net margin-top = 8px) */
  .title{
    margin-top: 8px !important;
  }

  /* ANY logo: 1x bigger (from previous), header unaffected */
  
</style>


<!-- === FIX: Move ONLY ANY logo down 5x (40px) without affecting layout or title === -->
<style>
  
</style>


<!-- === UPDATE: Move ANY logo down an additional 4x (total 72px), header untouched === -->
<style>
  
</style>


<!-- === UPDATE: Move ANY logo up 2x (net 56px), header untouched === -->
<style>
  
</style>


<!-- === UPDATE: Move ANY logo down 1x (net 64px), header untouched === -->
<style>
  
</style>


<!-- === UPDATE: Move ANY logo down 0.5x (net 68px), header untouched === -->
<style>
  
</style>


<!-- === UPDATE: Move ANY logo right 1x (8px), header untouched === -->
<style>
  
</style>


<!-- === UPDATE: Shift UPCOMING EVENTS header left 2x (16px), logo untouched === -->
<style>
  .title{
    position: relative !important;
    left: -16px !important; /* move left 2x */
  }
</style>


<!-- === UPDATE: Shift UPCOMING EVENTS header left 1x more (total 24px), logo untouched === -->
<style>
  .title{
    position: relative !important;
    left: -24px !important; /* total left shift */
  }
</style>


<!-- === UPDATE: Shift UPCOMING EVENTS header left 0.5x more (total 28px), logo untouched === -->
<style>
  .title{
    position: relative !important;
    left: -28px !important; /* total left shift */
  }
</style>


<!-- === UPDATE: Reduce Years & States pill widths by ~1.5x === -->
<style>
  .state-btn,
  .year-btn{
    padding-left: 6px !important;
    padding-right: 6px !important; /* ~1.5x narrower than previous */
  }
</style>


<!-- === UPDATE: Further narrow Years & States pill widths === -->
<style>
  .state-btn,
  .year-btn{
    padding-left: 4px !important;
    padding-right: 4px !important;
  }
</style>


<!-- === UPDATE: Reduce overall pill shape length (Years & States) === -->
<style>
  .state-btn,
  .year-btn{
    min-width: 56px !important;   /* shrink pill body itself */
    gap: 4px !important;         /* tighten icon/text spacing */
    padding-left: 4px !important;
    padding-right: 4px !important;
  }
</style>


<!-- === UPDATE: Slightly increase overall pill shape size (Years & States) === -->
<style>
  .state-btn,
  .year-btn{
    min-width: 60px !important;   /* slightly larger than before */
    gap: 5px !important;
    padding-left: 5px !important;
    padding-right: 5px !important;
  }
</style>


<!-- === OVERRIDE: Keep Events pill sizing consistent with Years & States === -->
<style>
  .event-btn{
    min-width: 60px !important;
    gap: 5px !important;
    padding-left: 5px !important;
    padding-right: 5px !important;
  }
</style>


<!-- === PATCH: Place Events pill immediately next to Years pill (same vertical position) === -->
<style>
  /* Let JS position the Events pill relative to Years so they sit side-by-side */
  .event-filter{
    left: 0 !important;
  }
</style>


<!-- === FIX: Make Events pill visually identical + aligned with Years/States === -->
<style>
  /* Ensure all three pills share identical baseline/vertical alignment */
  .event-filter,
  .year-filter,
  .state-filter{
    bottom: 6px !important;
    transform: none !important; /* remove mismatched nudge */
  }

  /* Match Events pill button styling to Years/States */
  .event-btn{
    height: 28px !important;
    display: inline-flex !important;
    align-items: center !important;
    gap: 6px !important;
    border-radius: 999px !important;
    background: #ffffff !important;
    border: 1px solid rgba(0,0,0,0.16) !important;
    box-shadow: 0 2px 10px rgba(0,0,0,0.10) !important;
    font-size: 12px !important;
    color: rgba(0,0,0,0.6) !important;
    cursor: pointer !important;
    user-select: none !important;
    justify-content: space-between !important;
    white-space: nowrap !important;
  }

  /* Give Events pill the same label/caret behavior */
  .event-label{
    flex: 1 1 auto !important;
    min-width: 0 !important;
    white-space: nowrap !important;
    overflow: hidden !important;
    text-overflow: ellipsis !important;
  }
  .event-caret{ flex: 0 0 auto !important; opacity: 0.7 !important; }

  /* Ensure Events pill participates in the same size tuning as the others */
  .state-btn,
  .year-btn,
  .event-btn{
    min-width: 60px !important;
    gap: 5px !important;
    padding-left: 5px !important;
    padding-right: 5px !important;
  }
</style>


<!-- === FIX: Place Events pill with Years/States using stable absolute positioning (no search bar impact) === -->
<style>
  .event-filter{
    position: absolute !important;
    bottom: 6px !important;     /* same baseline as other pills */
    left: 280px !important;     /* between Years (200px) and States (360px) */
    z-index: 61 !important;
    pointer-events: auto !important;
    transform: none !important;
  }
</style>


<!-- === UPDATE: Move States pill right by 10x ( +80px ) — States only === -->
<style>
  .state-filter{
    left: 440px !important; /* was 360px, now +80px */
  }
</style>


<!-- === UPDATE: Move States pill right by additional 2x ( +16px ) — States only === -->
<style>
  .state-filter{
    left: 456px !important; /* was 440px, now +16px */
  }
</style>


<!-- === UPDATE: Move States pill left by 1x ( -8px ) — States only === -->
<style>
  .state-filter{
    left: 448px !important; /* was 456px, now -8px */
  }
</style>


<!-- === UPDATE: Move Years pill right by 5x ( +40px ) — Years only === -->
<style>
  .year-filter{
    left: 240px !important; /* was 200px, now +40px */
  }
</style>


<!-- === FIX: Move Years pill RIGHT by 5x (+40px) from its current position === -->
<style>
  .year-filter{
    left: 280px !important;
  }
</style>


<!-- === UPDATE: Move Years pill RIGHT by 30x (+240px) === -->
<style>
  .year-filter{
    left: 520px !important;
  }
</style>


<!-- === UPDATE: Move Years pill RIGHT by 3x (+24px) === -->
<style>
  .year-filter{
    left: 544px !important;
  }
</style>


<!-- === UPDATE: Move Years pill LEFT by 0.5x (-4px) === -->
<style>
  .year-filter{
    left: 540px !important;
  }
</style>


<!-- === UPDATE: Align Events pill to ~32px gap from Years === -->
<style>
  .event-filter{
    left: 448px !important;
  }
</style>


<!-- === UPDATE: Move Events pill right by 3x (+24px) === -->
<style>
  .event-filter{
    left: 472px !important;
  }
</style>


<!-- === UPDATE: Move Events pill left by 0.5x (-4px) === -->
<style>
  .event-filter{
    left: 468px !important;
  }
</style>


<!-- === FIX: EVENTS pill matches YEARS pill text color + behavior === -->
<style>
  /* Match Years button typography and color */
  .event-btn{
    font-size: 12px !important;
    color: rgba(0,0,0,0.6) !important;
  }

  /* Mirror has-selection bold behavior used by Years/States */
  .year-btn.has-selection,
  .state-btn.has-selection,
  .event-btn.has-selection{
    font-weight: 600 !important;
  }
</style>


<!-- (removed duplicate Events pill toggle script; unified wiring is handled near the end of the file) -->


<style>
/* spacing-only override: no other behavior changes */
.filter-pills,
.filter-bar,
.filters,
.filter-container {
  display: flex;
  gap: 16px;
}
</style>


<style>
/* === Selected indicator: glowing green circle (replaces checkmark) === */
/* Put the dot RIGHT BEFORE the caret on all three pills, using existing has-selection classes */

.year-caret, .state-caret, .event-caret {
  display: inline-flex;
  align-items: center;
}

/* Dot appears before caret when selected */
.year-btn.has-selection .year-caret::before,
.state-btn.has-selection .state-caret::before,
.event-btn.has-selection .event-caret::before {
  content: "";
  width: 10px;
  height: 10px;
  margin-right: 6px;
  border-radius: 50%;
  background-color: #28a745;
  box-shadow:
    0 0 4px rgba(40,167,69,0.9),
    0 0 8px rgba(40,167,69,0.7),
    0 0 14px rgba(40,167,69,0.5);
}

/* Hide any literal checkmark character if still present anywhere in labels */
.year-label, .event-label {
  /* no-op: we intentionally don't change text; dot is purely visual */
}
</style>


<style>
/* === Shift all three filter pills together 2x left (16px) — group-only, no per-pill changes === */
/* Target the common parent that contains all three filters */
div:has(> .event-filter):has(> .year-filter):has(> .state-filter){
  margin-left: -16px;
}
</style>


<style>
/* === Shift EVENTS / YEARS / STATES pills down 1x (8px) — group-only === */
div:has(> .event-filter):has(> .year-filter):has(> .state-filter){
  margin-top: 8px;
}
</style>


<style>
/* === Shift ONLY EVENTS / YEARS / STATES pills down 1x (8px) === */
/* These pills are positioned absolutely, so use translateY for a reliable visual shift */
.event-filter, .year-filter, .state-filter{
  transform: translateY(5px) !important;
}
</style>


<style>
/* Mobile: lock to a zoomed-out desktop layout */
html, body { margin: 0; }
</style>


<style>
/* Mobile-only: center the zoomed-out (desktop-width) layout horizontally */
@media (max-width: 900px){
  body{
    width: 1200px;          /* match viewport layout width */
    margin-left: auto;
    margin-right: auto;
  }
}
</style>


<style>
/* === v1: Mobile open-state + frozen full header === */
.header-freeze{
  position: sticky;
  top: 0;
  z-index: 999;
  background: var(--bg);
  padding-top: env(safe-area-inset-top);
}

/* The green bar should remain visually the same, but it no longer needs its own sticky behavior
   because the whole header (title + bar) is frozen by .header-freeze. */
.header-freeze .sticky-head{
  position: relative !important;
  top: auto !important;
}

/* Prevent the month list from sliding under the frozen header */
body{
  scroll-padding-top: 160px;
}
</style>


<!-- OVERRIDE: increase ONLY .card-body text by +1px (do not touch month/group headers) -->
<style>
  .card-body{
    font-size: 14px !important; /* +1px from 13px base */
  }
  .card-body *{
    font-size: inherit !important;
  }
</style>

</head>
<body>
  <div class="header-freeze">
<div class="wrap">
    <div class="top">
      <h1 class="title">Events</h1>
      


    </div>
  </div>

  <div class="sticky-head">
    <div class="head-grid">
      <div class="head-cell"></div>
      <div class="head-cell"></div>
      <div class="head-cell"></div>
      <div class="head-cell"></div>
      <div class="head-cell"></div>
      <div class="head-cell"></div>

  <div class="head-search" aria-label="Filter events">
    <div class="head-search-box">
      <span class="head-search-icon" aria-hidden="true">
        <svg viewBox="0 0 24 24">
          <path d="M10 18a8 8 0 1 1 5.292-14.001A8 8 0 0 1 10 18Zm11.707 2.293-5.4-5.4a10 10 0 1 0-1.414 1.414l5.4 5.4a1 1 0 0 0 1.414-1.414Z"/>
        </svg>
      </span>
      <input id="nlSearch" type="text" autocomplete="off" spellcheck="false"
             placeholder="Filter (e.g., &quot;seminar&quot;, &quot;maine&quot;, &quot;2026&quot;)" />
      <button class="head-search-clear" type="button" aria-label="Clear filter" title="Clear">×</button>
</div>
  

  
  <div class="event-filter" aria-label="Filter by event type">
    <button id="eventBtn" type="button" class="event-btn" aria-haspopup="true" aria-expanded="false">
      <span class="event-label">Events</span><span class="event-caret" aria-hidden="true">▾</span>
    </button>
    <div id="eventMenu" class="event-menu" hidden>
      <div class="event-menu-header">
        <span class="event-menu-title">Event Types</span>
        <button id="eventClear" type="button" class="event-clear">Clear</button>
      </div>
      <div id="eventList" class="event-list"></div>
    </div>
  </div>

<div class="year-filter" aria-label="Filter by year">
    <button id="yearBtn" type="button" class="year-btn" aria-haspopup="true" aria-expanded="false">
      <span class="year-label">Years</span><span class="year-caret" aria-hidden="true">▾</span>
    </button>
    <div id="yearMenu" class="year-menu" hidden>
      <div class="year-menu-header">
        <span class="year-menu-title">Years</span>
        <button id="yearClear" type="button" class="year-clear">Clear</button>
      </div>
      <div id="yearList" class="year-list"></div>
    </div>
  </div>

  <div class="state-filter" aria-label="Filter by state">
    <button id="stateBtn" type="button" class="state-btn" aria-haspopup="true" aria-expanded="false">
      States <span class="state-caret" aria-hidden="true">▾</span>
    </button>
    <div id="stateMenu" class="state-menu" hidden>
      <div class="state-menu-header">
        <span class="state-menu-title">States</span>
        <button id="stateClear" type="button" class="state-clear">Clear</button>
      </div>
      <div id="stateList" class="state-list"></div>
    </div>
  </div>
</div>

</div>

  </div>
</div>


  <div class="wrap" style="padding-top: 0px;">
  <div id="monthsRoot" aria-live="polite"></div>
</div>

  <script>
    // Add data-labels for mobile stacked layout
    (function() {
      const labels = ["Event Type","For","Where","Location","Day","Date"];
      document.querySelectorAll(".row").forEach(row => {
        const cells = row.querySelectorAll(".cell");
        cells.forEach((cell, i) => cell.setAttribute("data-label", labels[i] || ""));
      });
    })();
  </script>

  <script>
    // Clean NaN placeholders (leave cells blank instead)
    document.querySelectorAll('.row').forEach(row => {
      const cells = row.querySelectorAll('.cell');
      cells.forEach((cell, i) => {
        if (cell.textContent.trim().toLowerCase() === 'nan') {
          // WHERE column (index 2) should show fallback label
          cell.textContent = (i === 2) ? 'Hosted Location' : '';
        }
      });
    });
  </script>


  <script>
    // Add monochrome icons:
    // - Geotag icon before Location (4th column)
    // - Building icon before Where (3rd column) when non-empty
    (function() {
      const pin = `<span class="geo-icon" aria-hidden="true">
  <svg viewBox="0 0 24 24" focusable="false">
    <path d="M12 2c-3.86 0-7 3.14-7 7 0 5.25 7 13 7 13s7-7.75 7-13c0-3.86-3.14-7-7-7zm0 9.5A2.5 2.5 0 1 1 12 6a2.5 2.5 0 0 1 0 5.5z"/>
  </svg>
</span>`;
      const bldg = `<span class="bldg-icon" aria-hidden="true">
  <svg viewBox="0 0 24 24" focusable="false">
    <path d="M3 21h18v-2H3v2zm2-4h14V3H5v14zm2-2V5h10v10H7zm1-8h2v2H8V7zm0 3h2v2H8v-2zm0 3h2v2H8v-2zm4-6h2v2h-2V7zm0 3h2v2h-2v-2zm0 3h2v2h-2v-2z"/>
  </svg>
</span>`;

      document.querySelectorAll('.row').forEach(row => {
        const cells = row.querySelectorAll('.cell');
        if (cells.length < 6) return;

        // Where column (index 2)
        const whereCell = cells[2];
        const whereText = (whereCell.textContent || '').trim().toLowerCase();
        if (whereText && whereText !== 'nan') {
          if (!whereCell.querySelector('.bldg-icon')) {
            whereCell.insertAdjacentHTML('afterbegin', bldg);
          }
        } else {
          // ensure blank if NaN slipped through
          if (whereText === 'nan') whereCell.textContent = 'Hosted Location';
        }

        // Location column (index 3)
        const locCell = cells[3];
        const locText = (locCell.textContent || '').trim().toLowerCase();
        if (!locCell.querySelector('.geo-icon')) {
          const inline = locCell.querySelector('.location-inline');
          if (inline) {
            inline.insertAdjacentHTML('afterbegin', pin);
          } else {
            locCell.insertAdjacentHTML('afterbegin', pin);
          }
        }
        // If location is nan (shouldn't happen), blank it but keep icon
        if (locText === 'nan') {
          locCell.childNodes.forEach(n => {
            if (n.nodeType === Node.TEXT_NODE) n.textContent = '';
          });
        }
      });
    })();
  </script>


  <script>
    // ANYJJ:SEARCH_AND_LOCATION
    (function() {
      const abbrToFull = {
        AL:"Alabama", AK:"Alaska", AZ:"Arizona", AR:"Arkansas", CA:"California", CO:"Colorado", CT:"Connecticut",
        DE:"Delaware", FL:"Florida", GA:"Georgia", HI:"Hawaii", ID:"Idaho", IL:"Illinois", IN:"Indiana", IA:"Iowa",
        KS:"Kansas", KY:"Kentucky", LA:"Louisiana", ME:"Maine", MD:"Maryland", MA:"Massachusetts", MI:"Michigan",
        MN:"Minnesota", MS:"Mississippi", MO:"Missouri", MT:"Montana", NE:"Nebraska", NV:"Nevada", NH:"New Hampshire",
        NJ:"New Jersey", NM:"New Mexico", NY:"New York", NC:"North Carolina", ND:"North Dakota", OH:"Ohio",
        OK:"Oklahoma", OR:"Oregon", PA:"Pennsylvania", RI:"Rhode Island", SC:"South Carolina", SD:"South Dakota",
        TN:"Tennessee", TX:"Texas", UT:"Utah", VT:"Vermont", VA:"Virginia", WA:"Washington",
        WV:"West Virginia", WI:"Wisconsin", WY:"Wyoming", DC:"District of Columbia"
      };

      const stateNameToAbbr = Object.fromEntries(
        Object.entries(abbrToFull).map(([abbr, full]) => [full.toLowerCase(), abbr.toLowerCase()])
      );

      function norm(s) {
        return (s || '').toString().toLowerCase().replace(/\s+/g,' ').trim();
      }

      // Hydrate rows: blank "nan", split location into city + FULL state name in data attributes,
      // and render location as two-line City / Full State (as requested).
      
      async function renderFromCSV(){
        const root = document.getElementById('monthsRoot');
        if (!root) return;

        // Loading state
        root.innerHTML = '<div style="padding:16px;color:rgba(255,255,255,.65);font-size:13px;">Loading events…</div>';
        const csvCandidates = [
          'data/events.csv',
          './data/events.csv',
          '/data/events.csv',
          'events.csv',
          './events.csv'
        ];

        let csvText = '';
        let lastErr = null;
        let tried = [];

        for (const url of csvCandidates){
          try{
            tried.push(url);
            const res = await fetch(url, { cache: 'no-store' });
            if (!res.ok) throw new Error('HTTP ' + res.status);
            csvText = await res.text();
            if (csvText && csvText.trim().length) break;
          }catch(err){
            lastErr = err;
          }
        }

        if (!csvText || !csvText.trim().length){
          const msg = (lastErr && lastErr.message) ? lastErr.message : (lastErr || 'Unknown error');
          root.innerHTML = `
            <div style="padding:16px;color:#ffb3b3;font-size:13px;">
              CSV load error<br>
              <span style="opacity:.75">${msg}</span><br>
              <span style="opacity:.6">Tried: ${tried.join(', ')}</span>
            </div>`;
          return;
        }

        function parseCSV(text){
          const rows = [];
          let row = [], cur = '', inQ = false;
          for (let i=0;i<text.length;i++){
            const ch = text[i];
            if (inQ){
              if (ch === '"'){
                if (text[i+1] === '"'){ cur += '"'; i++; }
                else inQ = false;
              } else cur += ch;
            } else {
              if (ch === '"') inQ = true;
              else if (ch === ','){ row.push(cur); cur=''; }
              else if (ch === '\n'){
                row.push(cur); cur='';
                // ignore completely empty trailing line
                if (row.some(v => (v || '').trim() !== '')) rows.push(row);
                row = [];
              } else if (ch !== '\r') cur += ch;
            }
          }
          row.push(cur);
          if (row.some(v => (v || '').trim() !== '')) rows.push(row);
          return rows;
        }

        const matrix = parseCSV(csvText);
        if (!matrix.length){
          root.innerHTML = '<div style="padding:16px;color:#ffb3b3;font-size:13px;">CSV load error<br><span style="opacity:.75">Empty file</span></div>';
          return;
        }

        const headers = matrix[0].map(h => (h || '').trim());
        const lower = headers.map(h => h.toLowerCase());
        const dataRows = matrix.slice(1);

        const pick = (obj, keys) => {
          for (const k of keys){
            const idx = lower.indexOf(k.toLowerCase());
            if (idx !== -1){
              const v = obj[idx];
              if (v !== undefined && v !== null && String(v).trim() !== '') return String(v).trim();
            }
          }
          return '';
        };

        function parseDateFlex(s){
          const str = (s || '').trim();
          if (!str) return null;

          // yyyy-mm-dd
          let m = str.match(/^(\d{4})-(\d{1,2})-(\d{1,2})/);
          if (m){
            const y = +m[1], mo = +m[2]-1, d = +m[3];
            const dt = new Date(y, mo, d);
            return isNaN(dt) ? null : dt;
          }

          // mm/dd/yyyy (or m/d/yy)
          m = str.match(/^(\d{1,2})\/(\d{1,2})\/(\d{2,4})/);
          if (m){
            const mo = +m[1]-1, d = +m[2], yRaw = +m[3];
            const y = (m[3].length === 2) ? (yRaw + 2000) : yRaw;
            const dt = new Date(y, mo, d);
            return isNaN(dt) ? null : dt;
          }

          // try Date.parse fallback
          const t = Date.parse(str);
          if (!isNaN(t)) return new Date(t);

          return null;
        }

        const toMDY = (dt) => {
          const mm = String(dt.getMonth()+1).padStart(2,'0');
          const dd = String(dt.getDate()).padStart(2,'0');
          const yy = String(dt.getFullYear());
          return `${mm}/${dd}/${yy}`;
        };

        const weekdayShort = (dt) =>
          new Intl.DateTimeFormat('en-US', { weekday: 'short' }).format(dt);

        const monthLabel = (dt) =>
          new Intl.DateTimeFormat('en-US', { month: 'long', year: 'numeric' }).format(dt);

        // Field mapping (aliases) — keeps the UI looking like Index71 even if CSV headers differ
        const alias = {
          type: ['type', 'event type', 'event_type', 'event', 'category'],
          for: ['for', 'seminar by', 'seminar_by', 'instructor', 'coach', 'guest', 'taught by', 'name'],
          where: ['where', 'host', 'host gym', 'academy', 'gym', 'venue', 'location name'],
          // IMPORTANT: do NOT map `CITY` alone into the Location cell when CITY/STATE are separate columns.
          // We want the Location UI to always be City (top) + State (bottom).
          location: ['location', 'city/state', 'city state', 'place'],
          created: ['created', 'created date', 'created_at', 'created at'],
          date: ['date', 'event date', 'start date', 'day/date', 'start'],
          day: ['day', 'weekday']
        };

        const events = [];
        for (const row of dataRows){
          const dt = parseDateFlex(pick(row, alias.date));
          if (!dt) continue;

          const ev = {
            dt,
            type: pick(row, alias.type) || 'Event',
            for: pick(row, alias.for) || '—',
            where: pick(row, alias.where) || 'Hosted Location',
            location: pick(row, alias.location) || '',
            day: pick(row, alias.day) || weekdayShort(dt),
            dateStr: toMDY(dt),
            createdStr: pick(row, alias.created) || ''
          };

          ev.createdDt = parseDateFlex(ev.createdStr);

          // If location appears in separate City/State columns, prefer that mapping.
          // Index71 expects Location to be CITY (top) + STATE (bottom), so we must not drop STATE.
          const city = pick(row, ['city']);
          const st = pick(row, ['state', 'state abbr', 'state_abbr', 'st']);
          if (city && st) {
            ev.location = `${city}, ${st}`;
          } else if (!ev.location || ev.location.toLowerCase() === 'nan') {
            // Only fall back to partial City/State if a combined location was not provided.
            if (city || st) ev.location = [city, st].filter(Boolean).join(', ');
          }

          // Normalize NaN
          for (const k of ['type','for','where','location']){
            if ((ev[k] || '').toLowerCase() === 'nan') ev[k] = '';
          }
          if (!ev.where) ev.where = 'Hosted Location';
          if (!ev.location) ev.location = '—';

          events.push(ev);
        }

        events.sort((a,b)=>b.dt-a.dt);

        // Build month cards
        root.innerHTML = '';
        const byMonth = new Map();
        for (const ev of events){
          const key = `${ev.dt.getFullYear()}-${String(ev.dt.getMonth()+1).padStart(2,'0')}`;
          if (!byMonth.has(key)) byMonth.set(key, { label: monthLabel(ev.dt), items: [] });
          byMonth.get(key).items.push(ev);
        }

        if (!events.length){
          root.innerHTML = '<div style="padding:16px;color:rgba(255,255,255,.65);font-size:13px;">No events found in CSV.</div>';
          return;
        }

        for (const {label, items} of byMonth.values()){
          const card = document.createElement('section');
          card.className = 'month-card';
          card.setAttribute('aria-label', label);

          const head = document.createElement('div');
          head.className = 'month-label';
          head.textContent = label;

          const body = document.createElement('div');
          body.className = 'card-body';

          for (const ev of items){
            const rowEl = document.createElement('div');
            rowEl.className = 'row';
            if (ev.createdDt) rowEl.dataset.createdTs = String(ev.createdDt.getTime());
            rowEl.innerHTML = `
              <div class="cell type"><strong>${escapeHtml(ev.type)}</strong></div>
              <div class="cell"><strong>${escapeHtml(ev.for)}</strong></div>
              <div class="cell">${escapeHtml(ev.where)}</div>
              <div class="cell">${escapeHtml(ev.location)}</div>
              <div class="cell">${escapeHtml(ev.day)}</div>
              <div class="cell">${escapeHtml(ev.dateStr)}</div>
            `;
            body.appendChild(rowEl);
          }

          card.appendChild(head);
          card.appendChild(body);
          root.appendChild(card);
        }
      }

      function escapeHtml(str){
        return String(str ?? '')
          .replaceAll('&','&amp;')
          .replaceAll('<','&lt;')
          .replaceAll('>','&gt;')
          .replaceAll('"','&quot;')
          .replaceAll("'","&#39;");
      }

function hydrate() {

        const pin = `<span class="geo-icon" aria-hidden="true">
  <svg viewBox="0 0 24 24" focusable="false">
    <path d="M12 2c-3.86 0-7 3.14-7 7 0 5.25 7 13 7 13s7-7.75 7-13c0-3.86-3.14-7-7-7zm0 9.5A2.5 2.5 0 1 1 12 6a2.5 2.5 0 0 1 0 5.5z"/>
  </svg>
</span>`;

        document.querySelectorAll('.row').forEach(row => {
          const cells = row.querySelectorAll('.cell');
          if (!cells.length) return;

          // clear 'nan'
          cells.forEach((c, i) => {
            const t = (c.textContent || '').trim();
            if (t.toLowerCase() === 'nan') c.textContent = (i === 2) ? 'Hosted Location' : '';
          });

          if (cells.length < 4) return;
          const locCell = cells[3];

          // get current visible location text excluding icons
          const clone = locCell.cloneNode(true);
          clone.querySelectorAll('.geo-icon, .bldg-icon, .location-stack').forEach(n => n.remove());
          const locText = (clone.textContent || '').trim();

          let city = '';
          let abbr = '';
          let fullStateFromText = '';
          if (locText.includes(',')) {
            const parts = locText.split(',');
            city = (parts[0] || '').trim();
            const rawState = (parts[1] || '').trim();
            // If the CSV provides a full state name (e.g., "Massachusetts"), keep its casing.
            if (rawState && !/^[A-Za-z]{2}$/.test(rawState)) {
              fullStateFromText = rawState;
              abbr = (stateNameToAbbr[rawState.toLowerCase()] || '').toUpperCase();
            } else {
              abbr = rawState.toUpperCase();
            }
          } else {
            const parts = locText.split(/\s+/).filter(Boolean);
            if (parts.length >= 2) {
              abbr = parts.pop().toUpperCase();
              city = parts.join(' ');
            } else {
              city = locText;
            }
          }

          const full = fullStateFromText || abbrToFull[abbr] || abbr;

          // store data on row + cell
          row.dataset.city = city;
          row.dataset.state = full;       // FULL name
          row.dataset.stateAbbr = abbr;   // abbreviation
          locCell.dataset.city = city;
          locCell.dataset.state = full;
          locCell.dataset.stateAbbr = abbr;

          // store year for Year filter (before date cell is re-rendered later)
          const dateCell = cells[5];
          const rawDate = (dateCell?.textContent || '').trim();
          const ym = rawDate.match(/\b(\d{4})\b/);
          if (ym) row.dataset.year = ym[1];


          // render two-line display (City / Full State Name)
          // keep icons if present by preserving any leading icon HTML
          const existingIcons = Array.from(locCell.querySelectorAll('.geo-icon, .bldg-icon'))
            .map(n => n.outerHTML).join('');
          const iconHtml = existingIcons.includes('geo-icon') ? existingIcons : (pin + existingIcons);
          locCell.innerHTML = `
            <div class="location-inline">
              ${iconHtml}
              <div class="location-stack">
                <div class="location-city">${city || ''}</div>
                <div class="location-state">${full || ''}</div>
              </div>
            </div>
          `;

          // === Per-row "new" dot (based on CREATED date in CSV) ===
          // If CREATED is within the last 3 days (0–3 days old), show the same glowing dot on the far right.
          const ts = Number(row.dataset.createdTs || '');
          const existingDot = row.querySelector('.record-new-dot');
          if (!isNaN(ts) && ts > 0){
            const created = new Date(ts);
            const now = new Date();
            // compare by local calendar days
            const startOfCreated = new Date(created.getFullYear(), created.getMonth(), created.getDate()).getTime();
            const startOfNow = new Date(now.getFullYear(), now.getMonth(), now.getDate()).getTime();
            const diffDays = Math.floor((startOfNow - startOfCreated) / (24*60*60*1000));
            if (diffDays >= 0 && diffDays <= 3){
              if (!existingDot){
                const dot = document.createElement('span');
                dot.className = 'record-new-dot';
                dot.setAttribute('aria-hidden', 'true');
                row.appendChild(dot);
              }
            } else {
              if (existingDot) existingDot.remove();
            }
          } else {
            if (existingDot) existingDot.remove();
          }
        });
      }

      // Search: supports full state names matching abbreviations and vice versa.
      function setupSearch() {
        const input = document.getElementById('nlSearch');
        if (!input) return;

        // allow typing even with poster overlap
        const top = document.querySelector('.top');
        if (top) top.style.pointerEvents = 'none';
        const searchWrap = document.querySelector('.search-wrap');
        if (searchWrap) searchWrap.style.zIndex = '120';
        input.style.position = 'relative';
        input.style.zIndex = '130';

        const monthCards = Array.from(document.querySelectorAll('.month-card'));
        const rows = Array.from(document.querySelectorAll('.row'));

        
        
        const stateBtn = document.getElementById('stateBtn');
        const stateMenu = document.getElementById('stateMenu');
        const stateList = document.getElementById('stateList');
        const stateClear = document.getElementById('stateClear');

        const selectedStates = new Set();

        const yearBtn = document.getElementById('yearBtn');
        const yearMenu = document.getElementById('yearMenu');
        const yearList = document.getElementById('yearList');
        const yearClear = document.getElementById('yearClear');
        const eventBtn = document.getElementById('eventBtn');
        const eventMenu = document.getElementById('eventMenu');
        const eventList = document.getElementById('eventList');
        const eventClear = document.getElementById('eventClear');

        const selectedYears = new Set();
        const selectedTypes = new Set();

        function extractTypeFromRow(row){
          const cells = row ? row.querySelectorAll('.cell') : [];
          const t = (cells[0]?.innerText || cells[0]?.textContent || '').trim();
          // the type cell may have nested <strong>
          return t.replace(/\s+/g,' ').trim();
        }


        function extractYearFromRow(row){
          // 1) Prefer pre-hydrated dataset.year (set during hydrate() before any re-render)
          const y = (row && row.dataset) ? (row.dataset.year || '') : '';
          if (/^\d{4}$/.test(y)) return y;

          // 2) If the row sits under a month-card like "October 2025", use that (most reliable)
          const card = row ? row.closest('.month-card') : null;
          const cardLabel = (card?.getAttribute('aria-label') || card?.querySelector('.month-label')?.textContent || '').trim();
          const cm = cardLabel.match(/\b(\d{4})\b/);
          if (cm) return cm[1];

          // 3) Fall back to parsing the Date cell content (works after your date cell is re-rendered)
          const cells = row ? row.querySelectorAll('.cell') : [];
          const dt = (cells[5]?.innerText || cells[5]?.textContent || '').trim();
          const m = dt.match(/\b(\d{4})\b/);
          return m ? m[1] : '';
        }

        function updateYearBtnLabel(){
          if (!yearBtn) return;
          if (selectedYears.size === 0){
            yearBtn.innerHTML = '<span class="year-label">Years</span><span class="year-caret" aria-hidden="true">▾</span>';
            return;
          }
          const text = Array.from(selectedYears).sort().join(', ');
          yearBtn.innerHTML = `<span class="year-label">${text}</span><span class="year-caret" aria-hidden="true">▾</span>`;
        }

        function updateEventBtnLabel(){
          if (!eventBtn) return;
          if (selectedTypes.size === 0){
            eventBtn.innerHTML = '<span class="event-label">Events</span><span class="event-caret" aria-hidden="true">▾</span>';
            return;
          }
          const text = Array.from(selectedTypes).sort().join(', ');
          eventBtn.innerHTML = `<span class="event-label">${text}</span><span class="event-caret" aria-hidden="true">▾</span>`;
        }


        function populateYears(){
          if (!yearList) return;
          const years = new Set();
          rows.forEach(r => {
            const y = extractYearFromRow(r);
            if (y) years.add(y);
          });

          yearList.innerHTML = '';
          Array.from(years).sort().forEach(y => {
            const rowEl = document.createElement('label');
            rowEl.className = 'year-item';
            rowEl.innerHTML = `
              <input type="checkbox" value="${y}">
              <span>${y}</span>
            `;
            const cb = rowEl.querySelector('input');
            cb.addEventListener('change', () => {
              if (cb.checked) selectedYears.add(y);
              else selectedYears.delete(y);
              updateYearBtnLabel();
              applyFilter();
            });
            yearList.appendChild(rowEl);
          });

          updateYearBtnLabel();
        }

        function populateTypes(){
          if (!eventList) return;
          // derive unique types from currently loaded rows
          const types = Array.from(new Set(rows.map(extractTypeFromRow).filter(Boolean)))
            .map(t => t.replace(/\s+/g,' ').trim())
            .filter(Boolean)
            .sort((a,b) => a.localeCompare(b));
          eventList.innerHTML = '';
          types.forEach(tp => {
            const rowEl = document.createElement('label');
            rowEl.className = 'event-item';
            rowEl.innerHTML = `
              <input type="checkbox" value="${tp}">
              <span>${tp}</span>
            `;
            const cb = rowEl.querySelector('input');
            cb.addEventListener('change', () => {
              if (cb.checked) selectedTypes.add(tp);
              else selectedTypes.delete(tp);
              updateEventBtnLabel();
              applyFilter();
            });
            eventList.appendChild(rowEl);
          });
        }


        populateYears();

        populateTypes();



        function extractStateFromRow(row){
          // Prefer hydrated data attributes (works even after Location is rendered as City / Full State)
          const ds = (row && row.dataset) ? (row.dataset.stateAbbr || '') : '';
          if (/^[A-Z]{2}$/.test(ds)) return ds;

          const cells = row.querySelectorAll('.cell');
          const loc = (cells[3]?.innerText || cells[3]?.textContent || '').trim();

          // Common formats: "City, ST" or "City ST"
          let m = loc.match(/,\s*([A-Z]{2})\b/);
          if (m) return m[1];
          m = loc.match(/\b([A-Z]{2})\b/);
          return m ? m[1] : '';
        }

        function updateStateBtnLabel(){
          if (!stateBtn) return;
          if (selectedStates.size === 0){
            stateBtn.innerHTML = '<span class="state-label">States</span><span class="state-caret" aria-hidden="true">▾</span>';
            return;
          }
          const text = Array.from(selectedStates).sort().join(', ');
          stateBtn.innerHTML = `<span class="state-label">${text}</span><span class="state-caret" aria-hidden="true">▾</span>`;
        }

        function populateStates(){
          if (!stateList) return;
          const states = new Set();
          rows.forEach(r => {
            const st = extractStateFromRow(r);
            if (st) states.add(st);
          });

          stateList.innerHTML = '';
          Array.from(states).sort().forEach(st => {
            const rowEl = document.createElement('label');
            rowEl.className = 'state-item';
            rowEl.innerHTML = `
              <input type="checkbox" value="${st}">
              <span>${st}</span>
            `;
            const cb = rowEl.querySelector('input');
            cb.addEventListener('change', () => {
              if (cb.checked) selectedStates.add(st);
              else selectedStates.delete(st);
              updateStateBtnLabel();
              applyFilter();
            });
            stateList.appendChild(rowEl);
          });

          updateStateBtnLabel();
        }

        function openStateMenu(){
          if (!stateMenu || !stateBtn) return;
          stateMenu.hidden = false;
          stateBtn.setAttribute('aria-expanded', 'true');
        }

        function closeStateMenu(){
          if (!stateMenu || !stateBtn) return;
          stateMenu.hidden = true;
          stateBtn.setAttribute('aria-expanded', 'false');
        }

        function toggleStateMenu(){
          if (!stateMenu) return;
          if (stateMenu.hidden) openStateMenu();
          else closeStateMenu();
        }

        populateStates();



function applyFilter(){
  const q = norm(input.value || '');
  const tokens = q.split(/\s+/).filter(Boolean);

  rows.forEach(r => {
    // state filter
    const st = extractStateFromRow(r);
    const stateOk = (selectedStates.size === 0) || selectedStates.has(st);

    // type filter
    const tp = extractTypeFromRow(r);
    const typeOk = (selectedTypes.size === 0) || selectedTypes.has(tp);

    // year filter
    const y = extractYearFromRow(r);
    const yearOk = (selectedYears.size === 0) || selectedYears.has(y);

    // text filter (AND across tokens)
    let textOk = true;
    if (tokens.length){
      // month header text (e.g., "October 2025") so NL search can jump to a whole month group
      const card = r.closest('.month-card');
      const monthLabel = norm((card?.getAttribute('aria-label') || card?.querySelector('.month-label')?.textContent || '').trim());

      const hay = norm(r.innerText || r.textContent || '') + ' ' +
                  monthLabel + ' ' +
                  norm(r.dataset.city) + ' ' +
                  norm(r.dataset.state) + ' ' +
                  norm(r.dataset.stateAbbr);
      for (const t of tokens){
        // If token is a 2-letter state abbr, match either abbr or full state name
        if (/^[a-z]{2}$/.test(t) && abbrToFull[t.toUpperCase()]){
          const full = (abbrToFull[t.toUpperCase()] || '').toLowerCase();
          if (!(hay.includes(t) || (full && hay.includes(full)))) { textOk = false; break; }
        } else {
          if (!hay.includes(t)) { textOk = false; break; }
        }
      }
    }

    const show = stateOk && yearOk && typeOk && textOk;
    r.style.display = show ? '' : 'none';
  });

  // hide month groups with no visible rows
  monthCards.forEach(card => {
    const anyVisible = Array.from(card.querySelectorAll('.row')).some(rr => rr.style.display !== 'none');
    card.style.display = anyVisible ? '' : 'none';
  });
}

// Search listeners
const clearBtn = document.querySelector('.head-search-clear');
input.addEventListener('input', applyFilter);
input.addEventListener('keydown', (e) => {
  if (e.key === 'Escape'){
    input.value = '';
    applyFilter();
  }
});
if (clearBtn){
  clearBtn.addEventListener('click', () => {
    input.value = '';
    input.focus();
    applyFilter();
  });
}

// State "Clear"
if (stateClear){
  stateClear.addEventListener('click', (e) => {
    e.preventDefault();
    selectedStates.clear();
    stateList?.querySelectorAll('input[type="checkbox"]').forEach(cb => cb.checked = false);
    updateStateBtnLabel();
    applyFilter();
  });
}

// Year "Clear"
if (yearClear){
  yearClear.addEventListener('click', (e) => {
    e.preventDefault();
    selectedYears.clear();
    yearList?.querySelectorAll('input[type="checkbox"]').forEach(cb => cb.checked = false);
    updateYearBtnLabel();
    applyFilter();
  });
}

// Event Types "Clear"
if (eventClear){
  eventClear.addEventListener('click', (e) => {
    e.preventDefault();
    selectedTypes.clear();
    // uncheck all
    eventList?.querySelectorAll('input[type="checkbox"]').forEach(cb => cb.checked = false);
    updateEventBtnLabel();
    applyFilter();
  });
}


// Initial render
applyFilter();
      }

      renderFromCSV().then(() => {

      hydrate();

      // Display FOR value above WHERE value, with building icon to the left (LOCATION-style)
      document.querySelectorAll('.row').forEach(row => {
        const cells = row.querySelectorAll('.cell');
        if (cells.length < 3) return;

        const forCell = cells[1];
        const whereCell = cells[2];

        const forText = (forCell.textContent || '').trim();
        let whereText = (whereCell.textContent || '').trim();
        if (!whereText || whereText.toLowerCase() === 'nan') whereText = 'Hosted Location';

        forCell.innerHTML = `
          <div class="forwhere-inline">
            <span class="bldg-icon" aria-hidden="true">
  <svg viewBox="0 0 24 24" focusable="false">
    <path d="M3 21h18v-2H3v2zm2-4h14V3H5v14zm2-2V5h10v10H7zm1-8h2v2H8V7zm0 3h2v2H8v-2zm0 3h2v2H8v-2zm4-6h2v2h-2V7zm0 3h2v2h-2v-2zm0 3h2v2h-2v-2z"/>
  </svg>
</span>
            <div class="for-where-stack">
              <div class="for-main">${forText}</div>
              <div class="for-where">${whereText}</div>
            </div>
          </div>
        `;

        whereCell.textContent = '';
      });


      
      // Stack DAY above DATE with calendar icon on the LEFT (LOCATION-style)
      document.querySelectorAll('.row').forEach(row => {
        const cells = row.querySelectorAll('.cell');
        if (cells.length < 6) return;

        const dayCell = cells[4];
        const dateCell = cells[5];

        let dayText = (dayCell.textContent || '').trim();
        const dateText = (dateCell.textContent || '').trim();
        if (!dateText && !dayText) return;

        const dayMap = {
          Mon:'Monday', Tue:'Tuesday', Wed:'Wednesday', Thu:'Thursday',
          Fri:'Friday', Sat:'Saturday', Sun:'Sunday'
        };
        dayText = dayMap[dayText] || dayText;

        dateCell.innerHTML = `
          <div class="date-inline">
            <span class="cal-icon" aria-hidden="true">
              <svg viewBox="0 0 24 24" focusable="false">
                <path d="M7 3v3M17 3v3M4.5 8.5h15"/>
                <path d="M6 5h12a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V7a2 2 0 0 1 2-2z"/>
                <path d="M8 12h3M8 15h3M13 12h3M13 15h3"/>
              </svg>
            </span>
            <div class="date-stack">
              <div class="date-day">${dayText}</div>
              <div class="date-date">${dateText}</div>
            </div>
          </div>
        `;

        dayCell.textContent = '';
      });

      setupSearch();
      });
    })();
  </script>


<script>
// Robust dropdown toggle (ensures menus open/close)
document.addEventListener('DOMContentLoaded', () => {
  const stateBtn = document.getElementById('stateBtn');
  const stateMenu = document.getElementById('stateMenu');

  const eventBtn = document.getElementById('eventBtn');
  const eventMenu = document.getElementById('eventMenu');

  const yearBtn = document.getElementById('yearBtn');
  const yearMenu = document.getElementById('yearMenu');

  function wire(btn, menu){
    if (!btn || !menu) return;
    btn.addEventListener('click', (e) => {
      e.preventDefault();
      e.stopPropagation();
      // close the other menu(s) if open
      const isState = (btn === stateBtn);
      const isEvent = (btn === eventBtn);
      const isYear  = (btn === yearBtn);

      if (isState){
        if (eventMenu && !eventMenu.hidden){ eventMenu.hidden = true; eventBtn?.setAttribute('aria-expanded','false'); }
        if (yearMenu && !yearMenu.hidden){ yearMenu.hidden = true; yearBtn?.setAttribute('aria-expanded','false'); }
      }
      if (isEvent){
        if (stateMenu && !stateMenu.hidden){ stateMenu.hidden = true; stateBtn?.setAttribute('aria-expanded','false'); }
        if (yearMenu && !yearMenu.hidden){ yearMenu.hidden = true; yearBtn?.setAttribute('aria-expanded','false'); }
      }
      if (isYear){
        if (stateMenu && !stateMenu.hidden){ stateMenu.hidden = true; stateBtn?.setAttribute('aria-expanded','false'); }
        if (eventMenu && !eventMenu.hidden){ eventMenu.hidden = true; eventBtn?.setAttribute('aria-expanded','false'); }
      }

      menu.hidden = !menu.hidden;
      btn.setAttribute('aria-expanded', String(!menu.hidden));
    });
  }

  wire(stateBtn, stateMenu);
  wire(eventBtn, eventMenu);
  wire(yearBtn, yearMenu);

  document.addEventListener('click', (e) => {
    const t = e.target;

    if (eventMenu && eventBtn && !eventMenu.hidden){
      if (!(eventMenu.contains(t) || eventBtn.contains(t))){
        eventMenu.hidden = true;
        eventBtn.setAttribute('aria-expanded','false');
      }
    }

    if (stateMenu && stateBtn && !stateMenu.hidden){
      if (!(stateMenu.contains(t) || stateBtn.contains(t))){
        stateMenu.hidden = true;
        stateBtn.setAttribute('aria-expanded', 'false');
      }
    }

    if (yearMenu && yearBtn && !yearMenu.hidden){
      if (!(yearMenu.contains(t) || yearBtn.contains(t))){
        yearMenu.hidden = true;
        yearBtn.setAttribute('aria-expanded', 'false');
      }
    }
  });
});
</script>


<style>
/* === FINAL OVERRIDE: shift ONLY the 2nd-to-last column (DAY, col 5) to the RIGHT === */
/* This is appended at the end so it wins against earlier nth-child(5) rules. */
.head-grid .head-cell:nth-child(5),
.row .cell:nth-child(5){
  padding-left: 52px !important;   /* shift right */
  padding-right: 0 !important;
  text-align: left !important;
  overflow: visible !important;    /* prevent clipping from earlier rules */
  white-space: nowrap !important;
}
/* Do NOT touch the last column (DATE, col 6). */
</style>


<script>
(function(){
  const stateBtn = document.querySelector('.state-btn');
  const stateMenu = document.getElementById('stateMenu');

  if(!stateBtn || !stateMenu) return;

  function updateStateLabel(){
    const checked = stateMenu.querySelectorAll('input[type="checkbox"]:checked');
    if(checked.length > 0){
      stateBtn.innerHTML = 'States <span class="state-check"></span>';
    } else {
      stateBtn.textContent = 'States';
    }
  }

  stateMenu.addEventListener('change', updateStateLabel);
})();
</script>


<script>
(function(){
  const yearBtn = document.querySelector('.year-btn');
  const yearMenu = document.getElementById('yearMenu');

  if(!yearBtn || !yearMenu) return;

  function updateYearLabel(){
    const checked = yearMenu.querySelectorAll('input[type="checkbox"]:checked');
    if(checked.length > 0){
      yearBtn.innerHTML = 'Years <span class="year-check"></span>';
    } else {
      yearBtn.textContent = 'Years';
    }
  }

  yearMenu.addEventListener('change', updateYearLabel);
})();
</script>




<script>
(function(){
  function wireBold(btnSelector, menuSelector){
    const btn = document.querySelector(btnSelector);
    const menu = document.querySelector(menuSelector);
    if(!btn || !menu) return;

    function update(){
      const checked = menu.querySelectorAll('input[type="checkbox"]:checked').length > 0;
      btn.classList.toggle('has-selection', checked);
    }
    menu.addEventListener('change', update);
    update();
  }

  wireBold('.state-btn', '#stateMenu');
  wireBold('.year-btn', '#yearMenu');
  wireBold('.event-btn', '#eventMenu');
})();
</script>


<script>
(function(){
  function wirePill(btnSelector, menuSelector){
    const btn = document.querySelector(btnSelector);
    const menu = document.querySelector(menuSelector);
    if(!btn || !menu) return;

    function update(){
      const checked = menu.querySelectorAll('input[type="checkbox"]:checked').length > 0;
      btn.classList.toggle('has-selection', checked);
      // Keep label logic intact (checkmark handled elsewhere)
    }

    // Update on any checkbox change
    menu.addEventListener('change', update);

    // Update when a clear action is used (buttons or links inside menu)
    menu.addEventListener('click', function(e){
      const t = e.target;
      if (t && (t.matches('.clear, .clear-all, [data-clear], button[type="reset"]'))) {
        setTimeout(update, 0);
      }
    });

    // Safety: observe programmatic clears
    const mo = new MutationObserver(update);
    mo.observe(menu, { subtree: true, attributes: true });

    update();
  }

  wirePill('.state-btn', '#stateMenu');
  wirePill('.year-btn', '#yearMenu');
  wirePill('.event-btn', '#eventMenu');
})();
</script>


<script>
(function(){
  const input = document.getElementById('nlSearch');
  const clearBtn = document.querySelector('.search-clear');

  if(!input) return;

  function applyFilterSafe(){
    if (typeof applyFilter === 'function') {
      applyFilter();
    }
  }

  if(clearBtn){
    clearBtn.addEventListener('click', function(e){
      e.preventDefault();
      input.value = '';
      input.dispatchEvent(new Event('input', { bubbles: true }));
      applyFilterSafe();
      input.focus();
    });
  }
})();
</script>


<script>
(function(){
  const box = document.querySelector('.head-search-box');
  const input = document.getElementById('nlSearch');
  if(!box || !input) return;

  function applyFilterSafe(){
    if (typeof applyFilter === 'function') applyFilter();
  }

  function clearNow(){
    input.value = '';
    // fire both input + search to satisfy any existing handlers
    input.dispatchEvent(new Event('input', { bubbles: true }));
    input.dispatchEvent(new Event('search', { bubbles: true }));
    applyFilterSafe();
    input.focus();
  }

  // 1) Custom clear button/icon inside the search pill (event delegation)
  box.addEventListener('click', (e) => {
    const t = e.target;
    if(!t) return;

    const btn = t.closest(
      '.search-clear, .clear, .clear-x, .x, .x-btn, button[aria-label*="lear" i], [data-clear-search], [title*="lear" i]'
    );
    if(btn){
      e.preventDefault();
      e.stopPropagation();
      clearNow();
    }
  }, true);

  // 2) Native clear "x" for input[type=search] triggers 'search' event when cleared
  input.addEventListener('search', () => {
    if(input.value === '') applyFilterSafe();
  });

  // 3) Safety: if input becomes empty by any means, re-apply filter
  input.addEventListener('input', () => {
    if(input.value === '') applyFilterSafe();
  });
})();
</script>




<style>
/* === FINAL: Ensure EVENTS pill is identical to YEARS/STATES pill sizing & typography === */
.event-btn{
  height: 28px !important;
  min-height: 28px !important;
  font-size: 11px !important;
  line-height: 28px !important;
  padding: 0 10px !important;
  border-radius: 999px !important;
  box-sizing: border-box !important;
  display: inline-flex !important;
  align-items: center !important;
  justify-content: space-between !important;
  user-select: none !important;
  color: var(--search-muted, rgba(0,0,0,0.42)) !important;
}

/* Match focus ring behavior */
.event-btn:focus{
  outline: none !important;
  box-shadow: 0 0 0 3px rgba(47,79,47,0.18), 0 2px 10px rgba(0,0,0,0.10) !important;
}

/* Keep caret tone consistent (when the caret exists before selections are made) */
.event-caret{
  color: var(--search-muted, rgba(0,0,0,0.42)) !important;
}
</style>

<!-- === FIX v49: Ensure EVENTS dropdown is clickable and on top === -->
<style>
  .event-filter{ z-index: 300 !important; }
  .event-menu{ z-index: 400 !important; }
</style>


<!-- === v50: Normalize ALL filter pills (Events/Years/States) to identical size + checkmark behavior === -->
<style>
  /* One source of truth for all three filter pill buttons */
  .state-btn, .year-btn, .event-btn{
    height: 28px !important;
    min-height: 28px !important;
    width: 92px !important;
    min-width: 92px !important;
    max-width: 92px !important;
    line-height: 28px !important;
    padding: 0 10px !important;
    border-radius: 999px !important;
    box-sizing: border-box !important;
    display: inline-flex !important;
    align-items: center !important;
    justify-content: center !important;
    gap: 6px !important;
    white-space: nowrap !important;
    overflow: hidden !important;
    text-overflow: ellipsis !important;
    font-size: 12px !important;
    color: var(--search-muted, rgba(0,0,0,0.42)) !important;
    background: #ffffff !important;
    border: 1px solid rgba(0,0,0,0.16) !important;
    box-shadow: 0 2px 10px rgba(0,0,0,0.10) !important;
  }

  /* Keep caret styling consistent if/when present */
  .year-caret, .state-caret, .event-caret{
    color: var(--search-muted, rgba(0,0,0,0.42)) !important;
    opacity: 0.7 !important;
  }

  /* Checkmark styling (match existing look, green) */
  .state-check, .year-check, .event-check{
    color: var(--green) !important;
    font-weight: 900 !important;
    line-height: 1 !important;
    transform: translateY(-0.5px);
  }
</style>

<script>
/* v50: Make EVENTS pill use the same "Label + green check" logic as YEARS/STATES */
(function(){
  const eventBtn = document.querySelector('.event-btn');
  const eventMenu = document.getElementById('eventMenu');
  const eventClear = document.getElementById('eventClear');

  if(!eventBtn || !eventMenu) return;

  function updateEventLabel(){
    const checked = eventMenu.querySelectorAll('input[type="checkbox"]:checked');
    if(checked.length > 0){
      eventBtn.innerHTML = '<span class="event-label">Events</span><span class="event-check" aria-hidden="true"></span><span class="event-caret" aria-hidden="true">▾</span>';
      eventBtn.classList.add('has-selection');
    } else {
      eventBtn.innerHTML = '<span class="event-label">Events</span><span class="event-caret" aria-hidden="true">▾</span>';
      eventBtn.classList.remove('has-selection');
    }
  }

  eventMenu.addEventListener('change', updateEventLabel);

  if(eventClear){
    eventClear.addEventListener('click', () => setTimeout(updateEventLabel, 0));
  }

  const mo = new MutationObserver(() => setTimeout(updateEventLabel, 0));
  mo.observe(eventMenu, { subtree: true, childList: true, attributes: true });

  requestAnimationFrame(updateEventLabel);
})();
</script>


<script>
/* === Repair Years/States pill markup so caret remains (for glow dot) === */
(function(){
  function ensureStructure(btn, labelClass, caretClass, baseText){
    if(!btn) return;
    var label = btn.querySelector('.' + labelClass);
    var caret = btn.querySelector('.' + caretClass);
    if(!label || !caret){
      btn.innerHTML = '<span class="' + labelClass + '">' + baseText + '</span><span class="' + caretClass + '" aria-hidden="true">▾</span>';
      label = btn.querySelector('.' + labelClass);
      caret = btn.querySelector('.' + caretClass);
    }
    return {label: label, caret: caret};
  }

  function wire(btnId, menuId, labelClass, caretClass, baseText){
    var btn = document.getElementById(btnId);
    var menu = document.getElementById(menuId);
    if(!btn || !menu) return;

    function update(){
      var checked = menu.querySelectorAll('input[type="checkbox"]:checked').length > 0;
      var parts = ensureStructure(btn, labelClass, caretClass, baseText);
      if(parts && parts.label){
        parts.label.textContent = baseText; // keep text stable; indicator is visual
      }
      btn.classList.toggle('has-selection', checked);
    }

    // Run after any existing listeners that may have overwritten innerHTML/textContent
    menu.addEventListener('change', function(){ setTimeout(update, 0); });
    // Initial
    setTimeout(update, 0);
  }

  wire('yearBtn','yearMenu','year-label','year-caret','Years');
  wire('stateBtn','stateMenu','state-label','state-caret','States');
})();
</script>



<!-- === v81 PATCH: make right side of table slightly more narrow === -->
<style>
  /* Narrow ONLY the right-side columns (CITY/STATE + DAY/DATE) slightly.
     Left side and overall layout remain unchanged.
  */

  /* Desktop / default grid */
  .head-grid,
  .row{
    /* Original right-side was visually wide; reduce col 4 + col 6 slightly */
    grid-template-columns: 138px 108px 124px 104px 90px 128px !important;
  }
</style>



<!-- === v86 PATCH: visually narrow the table by shrinking the card container to content width (no text shift) === -->
<style>
  /* The table rows use fixed grid columns (px). The "extra" space you see on the right
     is because the card container stretches to 100% width. Make the card (card-body)
     shrink-wrap to its grid content so the RIGHT EDGE moves left toward the final column
     without changing any cell padding or text positions.
  */
  .card-body{
    width: fit-content;
    max-width: 100%;
    margin-right: auto;
    margin-left: auto;
    display: block;
  }
</style>



<!-- === v92 PATCH: shrink table/container width by taking space ONLY from the LAST column === -->
<style>
  /* Keep columns 1-5 exactly the same; reduce ONLY the final (DAY/DATE) column width.
     This shrinks the overall table/grid width, so the right edge moves left.
  */
  .head-grid, .row{
    grid-template-columns: 138px 108px 124px 104px 90px 116px !important; /* last col: 128 -> 116 */
  }
</style>



<!-- === v93 PATCH: narrow container again by reducing last column width further === -->
<style>
  /* Reduce only the final column width a bit more; other columns unchanged */
  .head-grid, .row{
    grid-template-columns: 138px 108px 124px 104px 90px 108px !important; /* last col: 116 -> 108 */
  }
</style>



<!-- === v94 PATCH: header should not scroll page vertically when interacting with header === -->
<style>
  /* Prevent scroll chaining / overscroll bounce originating on header area */
  .sticky-head{
    overscroll-behavior: none;
    touch-action: manipulation; /* keep taps/clicks; scrolling should come from content area */
  }
</style>

<script>
/* v94: Lock page scrolling when gesture starts on the header (no visual/layout changes).
   - Allows taps/clicks on search + pills.
   - Prevents wheel/touch scroll from moving the page when pointer is over the header.
*/
(function(){
  const header = document.querySelector('.sticky-head');
  if(!header) return;

  // Block wheel scrolling when over header (trackpad/mousewheel)
  header.addEventListener('wheel', function(e){
    e.preventDefault();
  }, { passive: false });

  // Block touch scrolling when touch starts on header (mobile)
  header.addEventListener('touchmove', function(e){
    e.preventDefault();
  }, { passive: false });
})();
</script>


<style>
/* Index14: current state snapshot */
/* Events pill: far right (320px) and slightly smaller width (168px) */
.event-filter{ left: 320px; }
.event-filter .event-btn{
  width: 168px !important;
  min-width: 168px !important;
  max-width: 168px !important;
}
</style>


<style>
/* Index15: shift Events pill slightly left */
.event-filter{
  left: 300px !important; /* slight left from 320px */
}
</style>


<style>
/* Index16: make Events pill slightly narrower */
.event-filter .event-btn{
  width: 156px !important;
  min-width: 156px !important;
  max-width: 156px !important;
}
</style>


<style>
/* Index17: make Events pill slightly more narrow */
.event-filter .event-btn{
  width: 148px !important;
  min-width: 148px !important;
  max-width: 148px !important;
}
</style>


<style>
/* Index18: slightly more narrow Events pill */
.event-filter .event-btn{
  width: 142px !important;
  min-width: 142px !important;
  max-width: 142px !important;
}
</style>


<style>
/* Index19: slightly more narrow Events pill */
.event-filter .event-btn{
  width: 136px !important;
  min-width: 136px !important;
  max-width: 136px !important;
}
</style>


<style>
/* Index20: one more tiny narrowing step for Events pill */
.event-filter .event-btn{
  width: 132px !important;
  min-width: 132px !important;
  max-width: 132px !important;
}
</style>


<style>
/* Index21: slightly more narrow Events pill */
.event-filter .event-btn{
  width: 128px !important;
  min-width: 128px !important;
  max-width: 128px !important;
}
</style>


<style>
/* Index22: slightly more narrow Events pill */
.event-filter .event-btn{
  width: 124px !important;
  min-width: 124px !important;
  max-width: 124px !important;
}
</style>


<style>
/* Index23: slightly more narrow Events pill */
.event-filter .event-btn{
  width: 120px !important;
  min-width: 120px !important;
  max-width: 120px !important;
}
</style>


<style>
/* Index24: slightly more narrow Events pill */
.event-filter .event-btn{
  width: 116px !important;
  min-width: 116px !important;
  max-width: 116px !important;
}
</style>


<style>
/* Index26: VERY tiny vertical nudge for Events pill (1px) */
.event-filter{
  transform: translateY(1px) !important;
}
</style>


<style>
/* Index27: VERY tiny additional vertical nudge for Events pill (total 2px) */
.event-filter{
  transform: translateY(2px) !important;
}
</style>


<style>
/* Index28: micro vertical move, 2x more (total 4px) for Events pill */
.event-filter{
  transform: translateY(4px) !important;
}
</style>


<style>
/* Index29: micro vertical move, 2x more (total 8px) for Events pill */
.event-filter{
  transform: translateY(8px) !important;
}
</style>


<style>
/* Index30: slightly higher than previous (reduce vertical offset) */
.event-filter{
  transform: translateY(6px) !important;
}
</style>


<style>
/* Index31: match vertical position of Years & States pills to Events pill */
.event-filter,
.year-filter,
.state-filter{
  transform: translateY(6px) !important;
}
</style>


<style>
/* Index32: match Years & States pill widths to Events pill */
.event-filter .event-btn,
.year-filter .year-btn,
.state-filter .state-btn{
  width: 116px !important;
  min-width: 116px !important;
  max-width: 116px !important;
}
</style>


<style>
/* Index33: VERY small horizontal nudge left for States pill only */
.state-filter{
  transform: translate( -2px, 6px ) !important;
}
</style>


<style>
/* Index34: correct VERY small horizontal nudge LEFT for States pill only */
.state-filter{
  transform: translateX(-2px) translateY(6px) !important;
}
</style>


<style>
/* Index35: move States pill left 2x (4px total) */
.state-filter{
  transform: translateX(-4px) translateY(6px) !important;
}
</style>


<style>
/* Index36: move States pill left more (5x step -> 10px total left) */
.state-filter{
  transform: translateX(-10px) translateY(6px) !important;
}
</style>


<style>
/* Index37: FORCE States pill LEFT (negative X). Only States pill moves. */
.state-filter{
  transform: translateX(-20px) translateY(6px) !important;
}
</style>


<style>
/* Index38: move States pill LEFT 2x more (total 40px left) */
.state-filter{
  transform: translateX(-40px) translateY(6px) !important;
}
</style>


<style>
/* Index39: move States pill LEFT 1x more (total 48px left) */
.state-filter{
  transform: translateX(-48px) translateY(6px) !important;
}
</style>


<style>
/* Index40: VERY slight horizontal nudge LEFT for Years pill only */
.year-filter{
  transform: translateX(-2px) translateY(6px) !important;
}
</style>


<style>
/* Index41: move Years pill LEFT 6x more (total 12px left) */
.year-filter{
  transform: translateX(-12px) translateY(6px) !important;
}
</style>


<style>
/* Index42: move Years pill LEFT 10x more */
.year-filter{
  transform: translateX(-32px) translateY(6px) !important;
}
</style>


<style>
/* Index43: move Years pill LEFT 25x more */
.year-filter{
  transform: translateX(-82px) translateY(6px) !important;
}
</style>


<style>
/* Index44: move Years pill RIGHT 2x (4px right from previous) */
.year-filter{
  transform: translateX(-78px) translateY(6px) !important;
}
</style>


<style>
/* Index45: move Years pill RIGHT 1x (2px right from previous) */
.year-filter{
  transform: translateX(-76px) translateY(6px) !important;
}
</style>


<style>
/* Index46: move Years pill RIGHT 1x more (2px right from previous) */
.year-filter{
  transform: translateX(-74px) translateY(6px) !important;
}
</style>


<style>
/* Index47: move Events pill RIGHT 5x only */
.event-filter{
  transform: translateX(10px) translateY(6px) !important;
}
</style>


<style>
/* Index48: move Events pill RIGHT 12x only */
.event-filter{
  transform: translateX(24px) translateY(6px) !important;
}
</style>


<style>
/* Index49: move Events pill RIGHT another 12x (total 48px right) */
.event-filter{
  transform: translateX(48px) translateY(6px) !important;
}
</style>


<style>
/* Index50: move Events pill RIGHT 5x more (total 58px right) */
.event-filter{
  transform: translateX(58px) translateY(6px) !important;
}
</style>


<style>
/* Index51: move Events pill RIGHT 2x more (total 62px right) */
.event-filter{
  transform: translateX(62px) translateY(6px) !important;
}
</style>


<style>
/* Index52: move Events pill RIGHT 1x more (total 64px right) */
.event-filter{
  transform: translateX(64px) translateY(6px) !important;
}
</style>


<style>
/* Index53: move Events pill RIGHT 1x more (total 66px right) */
.event-filter{
  transform: translateX(66px) translateY(6px) !important;
}
</style>


<style>
/* Index54: move Events pill RIGHT 1x more (total 68px right) */
.event-filter{
  transform: translateX(68px) translateY(6px) !important;
}
</style>


<style>
/* Index55: move Events pill RIGHT 1x more (total 70px right) */
.event-filter{
  transform: translateX(70px) translateY(6px) !important;
}
</style>


<style>
/* Index56: move Events pill RIGHT 1x more (total 72px right) */
.event-filter{
  transform: translateX(72px) translateY(6px) !important;
}
</style>


<style>
/* Index57: VERY slight horizontal nudge RIGHT for Search pill only */
.search-filter,
.search-bar{
  transform: translateX(2px) !important;
}
</style>


<style>
/* Index58: move Search pill RIGHT 5x more (total 10px right) */
.search-filter,
.search-bar{
  transform: translateX(10px) !important;
}
</style>


<style>
/* Index59: VERIFIED selector — move ONLY the search pill slightly right */
.search-container,
.search-wrapper,
#searchBar,
.search-input{
  transform: translateX(10px) !important;
}
</style>


<style>
/* Index60: move ONLY the search pill (.head-search-box) slightly RIGHT */
.head-search-box{
  transform: translateX(10px) !important;
}
</style>


<style>
/* Index69: exact Index60 baseline + (1x) additional right shift for search bar */
/* Index60 had .head-search-box at translateX(10px); 1x more => 12px total */
.head-search-box{
  transform: translateX(12px) !important;
}
</style>


<style>
/* Index70: search bar right 1x more from Index69 (12px -> 14px) */
.head-search-box{
  transform: translateX(14px) !important;
}
</style>


<style>
/* Index71: search bar right 1x more (14px -> 16px) */
.head-search-box{
  transform: translateX(16px) !important;
}
</style>


<!-- === FINAL OVERRIDE: HARD DISABLE HORIZONTAL SCROLL === -->
<style>
html, body {
  overflow-x: hidden !important;
  max-width: 100vw !important;
}

.wrap,
.header-freeze,
.sticky-head,
.card-body,
.month-card {
  overflow-x: hidden !important;
  max-width: 100vw !important;
}

.head-grid,
.row {
  max-width: 100% !important;
}

.wrap {
  overflow-x: hidden !important;
  -webkit-overflow-scrolling: auto !important;
}
</style>
<!-- === END HORIZONTAL SCROLL LOCK === -->


<!-- === PATCH: Fixed header, compact top space (barely larger than EVENTS), logo 2x without adding header height === -->
<style>
  /* Keep: no horizontal scroll */
  html, body{
    overflow-x: hidden !important;
    max-width: 100vw !important;
  }

  /* Fixed header wrapper (title + green bar) */
  .header-freeze{
    position: fixed !important;
    top: 0 !important;
    left: 0 !important;
    right: 0 !important;
    width: 100% !important;
    z-index: 9999 !important;
    background: var(--bg) !important;
    overflow: visible !important;
    padding: 0 !important;
    margin: 0 !important;
  }

  /* EVENTS size (keeps the "new sizing" that was requested after undo: 2x original) */
  .title{
    font-size: 144px !important;   /* 2x of 72px */
    line-height: 1 !important;
    margin: 0 !important;
    padding: 0 !important;
  }

  /* The top row should be ONLY as tall as the EVENTS text (no extra space) */
  .top{
    margin: 0 !important;          /* remove -80px gap source */
    padding: 0 !important;
    align-items: flex-start !important;
  }
  .wrap{
    padding-top: 0 !important;
    padding-bottom: 0 !important;
  }

  /* Make the logo 2x but ABSOLUTE so it does NOT increase header height */
  

  /* Green bar stays directly under the title (no extra top spacing) */
  .sticky-head{
    position: relative !important; /* header-freeze is fixed, so bar doesn't need sticky */
    top: auto !important;
    margin-top: 0 !important;
  }

  /* Prevent any internal scrollbars in header area */
  .header-freeze,
  .header-freeze *{
    overflow: visible !important;
  }

  /* Push page content down by the fixed header height:
     Title (~144px) + green bar (~52px) + tiny buffer */
  body{
    padding-top: 212px !important;
  }
</style>

<script>
/* Ensure body padding matches actual fixed header height (no guessing) */
(function(){
  function applyPad(){
    var hf = document.querySelector('.header-freeze');
    if(!hf) return;
    // Use scrollHeight so absolute logo doesn't inflate the measured header area
    // We measure: title area + green bar only.
    var top = hf.querySelector('.top');
    var bar = hf.querySelector('.sticky-head');
    var h = 0;
    if(top) h += top.getBoundingClientRect().height;
    if(bar) h += bar.getBoundingClientRect().height;
    h = Math.ceil(h + 8); // tiny breathing room
    document.body.style.paddingTop = h + 'px';
  }
  window.addEventListener('load', applyPad);
  window.addEventListener('resize', applyPad);
  // In case fonts render after load
  setTimeout(applyPad, 50);
  setTimeout(applyPad, 250);
})();
</script>
<!-- === END PATCH === -->


<!-- === PATCH v6: Nudge EVENTS down to slightly overlap green bar + shift right === -->
<style>
  :root{
    --events-overlap-y: 18px; /* positive moves EVENTS down into the nav bar */
    --events-shift-x: 18px;   /* positive moves EVENTS to the right */
  }

  .title{
    position: relative !important;
    transform: translateY(var(--events-overlap-y)) translateX(var(--events-shift-x)) !important;
    z-index: 10001 !important; /* ensure it can sit over the green bar */
    pointer-events: none !important;
  }
</style>
<!-- === END PATCH v6 === -->

</body>
</html>
